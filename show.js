/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
//
// (C) 2024 Joost Brugman
//
// node show.js <path-to-pdf-file.pdf>
//
// This is a very limited and crude implementation of a task that processes emails from a mailbox. This was made in a hurry as a temporary solution
// and probably has a lot o bugs and issues that were not exposed in our specific use case. Feel free to use this at your own peril. Be very, very
// prudent in your testing to ensure this works as expected in your specific use case. According to general best practices this should be rewritten
// to be more robust and reliable. On that bases you could argue this is not a production ready solution. Again, use at your own risk. 
//
// This shows a list of all text items found in the pdf document. Use this during development to identify opportunities for matching.
//
/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
const fs = require('fs');
const PDFFile = require('./lib/pdffile');

(async () => {
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Test command line parameters
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if(process.argv.length !== 3) {
        console.log("Usage: node show.js <path-to-pdf-file.pdf>");
        process.exit(1);
    }

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Read PDF file
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    let pdfFile = new PDFFile();
    let pdfContents = fs.readFileSync(process.argv[2]);
    await pdfFile.open(pdfContents);

    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    // Let's see what is in the PDF
    /////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    console.log('This PDF file contains the following text items you can extract:');
    console.log(pdfFile.getTextItems());
})();
